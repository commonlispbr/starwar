#+TITLE: StarWar HomePage
* intro

  this is a game written in *CL* . It's very simple, but still better than the worm game for me. If you are curious about writting games on CL, and think the [[http://lispgames.org/index.php/Common_Worm][worm]] game /too/ simple, you may check this. 
  
  This game is developed under *sbcl* of linux, and I am not sure whether it could work under other platforms.
  
  Tested platform:
  - sbcl/linux: good
  - sbcl/winodws: little bug (life of planet disappeared, playable)
  
* screenshots
  
  Here are some screenshots of the game. 
  
  You are *TEAM BLUE* and your job is conqure the *RED TEAM* . The small stuffs are your warriors! The grey ones are *neutral* guys, they are lovely and just don't attack. 
  
#+BEGIN_HTML
<div align="center">
<a href="p0.png">
<img title=""
src="p0.png"/>
</a></div>
#+END_HTML
  
  You can select one planet and see the *LIFE* of it (the bar at the bottom-right of the screen). You can move soldiers by hold /left mouse button/ on your planet and /release/ at the goal planet. 

#+BEGIN_HTML
<div align="center">
<a href="p1.png">
<img title=""
src="p1.png"/>
</a></div>
#+END_HTML

  If your team is strong enough, the goal planet will be yours! 

#+BEGIN_HTML
<div align="center">
<a href="p2.png">
<img title=""
src="p2.png"/>
</a></div>
#+END_HTML

* download
 
  All the source code can be downloaded at github [[https://github.com/xzpeter/starwar][here]]. 
  
  Binaries will be released later on. 

* installation
  
  To run the game, you have to:
  
** install the latest *sbcl* (suggested)
    
    If you are using Ubuntu or Debian, you can use aptitude to install this:
#+BEGIN_SRC shell
sudo apt-get install sbcl
#+END_SRC

    Or you may go to the [[http://www.sbcl.org][sbcl homepage.]]

** install *quicklisp* on that sbcl 
   
   Quicklisp is commonly used in CL for installing packages. Refers to [[http://www.quicklisp.org/][it's homepage]] to get and make it work. 
   
** install required libraries
    
    here we need *lispbuilder-sdl* and *lispbuilder-sdl-ttf*. To install and load them, just run the codes below (you have to install /quicklisp/ first of course):
    
#+BEGIN_SRC lisp
(ql:quickload '("lispbuilder-sdl" "lispbuilder-sdl-ttf" "lispbuilder-sdl-gfx"))
#+END_SRC
 
    This will download, install, compile and load the required library. Without the lispbuilder-sdl-gfx, the game is workable but display uncorrectly. 
    
    *CAUTION*: if during the installation process, you got something like: /...libsdl_xxx.so is missing.../ , you might have to install the libsdl libraries first. You can find the required package (if you are using Debian related distro) by using (e.g. you need libsdl_gfx.so): 

#+BEGIN_SRC shell
apt-cache search libsdl | grep gfx
#+END_SRC

    with the output: 

#+BEGIN_SRC shell
libsdl-gfx1.2-4 - drawing and graphical effects extension for SDL
libsdl-gfx1.2-dev - development files for SDL_gfx
libsdl-gfx1.2-doc - documentation files for SDL_gfx
#+END_SRC

    Then, *libsdl-gfx1.2-4* possibly the required one. 

** configure /asdf/ system
    
    To let /asdf/ know my package, run this: 
    
#+BEGIN_SRC lisp
(push asdf:*central-registry* "PATH")
(push asdf:*central-registry* "PATH/lib")
#+END_SRC
    
    Here, *PATH* should be the path of *starwar* directory. 

** load the game and run
    
    Finally, this will load and run the game:

#+BEGIN_SRC lisp
(require "org.xzpeter.game.starwar")
(org.xzpeter.game.starwar:run)
#+END_SRC

    have fun!

* how to play
  
  Check the [[screenshots][screenshots]] first.
  
  Mostly use mouse left button to play. Single click on planets to select it; Hold the left button on your own planet, and drag it to another planet to make an /path arrow/ to transport soldiers on the original planet to the target planet. 
  
  Some key defines: 

| key   | functions                 |
|-------+---------------------------|
| *P*   | Pause or unpause the game |
| *R*   | Restart game              |
| *ESC* | Quit the game             |
| *+*   | Speed up                  |
| *-*   | Speed down                |

  *Blue* is yours, and *Red* is the computer. Try to eliminate all the *Red* planets! 

* bugs

  please contact google mail with id xzpeter. 

** current
 
   - planet life sometimes display incorrectly (disappear on some platform) (possibly fixed, lack of sdl_gfx lib)
   - random number will not work correctly in generated binaries. (fixed)
